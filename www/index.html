<!DOCTYPE html>
<html>

<head>

    <script type="text/javascript"
      src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDKEFpEE71fRcyBLTlEoR-TVuIitTFWQOQ">

    </script>
    <title>uomsa</title>
    <meta charset="utf-8" >
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">
    <link rel="stylesheet" href="assets/css/app.min.css" >
    <link rel="stylesheet" href="assets/css/styles.css" >
    <link rel="stylesheet" href="lib/pull/pull-to-refresh.css">
    <!-- <link rel="stylesheet" href="lib/hookjs/hook.css" > -->
    <link href='http://fonts.googleapis.com/css?family=Open+Sans+Condensed:300,700' rel='stylesheet' type='text/css' >

    
</head>

<body>

    <!-- Home Page ----------------------------------------------------------------------------------------- -->
    <div class="app-page" data-page="home">
        <div class="app-topbar red">
            <div class="app-title home-title">
                <img src="assets/pics/logo.png" style="margin-left:-10%;padding-top:7%;width:35px;height:35px;float:left">
                <span style="float:right;">uomsa</span>
            </div>
            <div class="right app-button  sign-in-home" data-target="login">Sign In</div>
            <div class="right app-button account-home" data-target="account">My Account</div>
        </div>
        <div class="scrollable"> 
            <div class="wrap">
                <div class="app-content app-scrollable">
                    <div class="label-app-section"><div class="title-app-section">Updates</div></div>
                    <div class="app-section">
                        Welcome to the uomsa app. You can access, and sign up for events.
                    </div>
                    <div class="events">

                        <div class="event upcoming">
                            <div class="label">
                                <div class="title">Upcoming Events</div>
                            </div>
                            <div class="event-list-wrap" style="overflow: scroll">
                                <div class="event-list upcoming-list">

                                </div>
                            </div>
                        </div>

                        <div class="event attending">
                            <div class="label">
                                <div class="title">Attending</div>
                            </div>
                            <div class="event-list-wrap" style="overflow: scroll">
                                <div class="event-list attending-list"></div>
                            </div>
                        </div>

                    </div>
                    <div class="app-section">
                        <i>Disclaimer: This App is still in beta, and under development. There may be bugs and hiccups as you use the App.
                            Jazakhalahu Khairun for your co-operation. </i>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- End Home Page ----------------------------------------------------------------------------------------- -->


    <!-- Login Page ----------------------------------------------------------------------------------------- -->
    <div class="app-page" data-page="login">

        <div class="app-topbar red">
            <div class="app-button left" data-back data-autotitle></div>
            <div class="app-title">Home</div>
        </div>
        <div class="app-content">
            <div class="app-section creds">
                <input class="app-input username" placeholder="Email" >
                <input class="app-input password" placeholder="Password" type="password" >
                <div class="app-section app-button blue sign-in" >Sign In</div>
            </div>

            <div id="spinner-sign-in" class="app-section" style="display:none;height:120px;"></div>

            <div class="app-section">
                Become a uomsa member to attend events, classes, or join activities!
            </div>
            <div class="app-section app-button green" data-target="register">Register</div>
        </div>
    </div>
    <!-- End Login Page ----------------------------------------------------------------------------------------- -->


    <!-- Account Page ----------------------------------------------------------------------------------------- -->
    <div class="app-page" data-page="account">
        <div class="app-topbar red">
            <div class="app-button left" data-back data-autotitle></div>
            <div class="app-title">My Account</div>
        </div>
         <div class="app-content">
            <div class="label-app-section">
                    <div class="title-app-section">Account Details</div>
            </div>
                <div class="app-section app-list">
                    <li class="name"></li>
                    <li class="id"></li>
                    <li class="email"></li>
                </div> 
                <div class="app-section app-button green edit-account" data-target="edit-account" >Change Password</div>
                <div class="app-section app-button blue sign-out" >Sign out</div>
            
        </div>
    </div>
    <!-- End Account Page ----------------------------------------------------------------------------------------- -->

    <!-- Edit-Account Page ----------------------------------------------------------------------------------------- -->
    <div class="app-page" data-page="edit-account">
        <div class="app-topbar red">
            <div class="app-button left" data-back data-autotitle></div>
            <div class="app-title">Change Password</div>
        </div>
        <div class="app-content">
        <!--     <div class="app-section change-creds">
                <ul class="fit">
                    <li><span>Firstname:</span><input class="app-input firstname-edit" placeholder="First Name" ></li>
                    <li><span>Lastname:</span><input class="app-input lastname-edit" placeholder="Last Name" ></li>
                    <li><span>Student ID:</span><input class="app-input std-number-edit" placeholder="uOttawa Student Number"></li>
                    <li><span>E-mail:</span><input class="app-input email-edit" placeholder="E-mail" ></li>
                </ul>
                <input class="app-input confirm-pass" type="password" placeholder="Confirm Password" >
                <div class="app-button green save-changes">Save changes.</div>
            </div> -->

            <div class="app-section change-pass">
                <input class="app-input password-old" type="password" placeholder="Old Password" >
                <input class="app-input password-new" type="password" placeholder="New Password" >
                <input class="app-input password-conf" type="password" placeholder="Confirm New Password" >
                <div class="app-button green save-new-pass">Save new password.</div>
            </div>

             <div id="spinner-register" class="app-section" style="display:none;height:120px;">
            </div>
        </div>
    </div>
    <!-- End Edit-Account Page ----------------------------------------------------------------------------------------- -->


    <!-- Register Page ----------------------------------------------------------------------------------------- -->
    <div class="app-page" data-page="register">
        <div class="app-topbar red">
            <div class="app-button left" data-back data-autotitle></div>
            <div class="app-title">Registration</div>
        </div>
        <div class="app-content">
            <div class="app-section">
                Sign up to become an MSA member to attend events, classes, or join activities!
            </div>
            <div class="app-section register-creds">
                <input class="app-input firstname" placeholder="First Name" >
                <input class="app-input lastname" placeholder="Last Name" >
                <input class="app-input std-number" placeholder="uOttawa Student Number">
                <input class="app-input email-reg" placeholder="E-mail" >
                <input class="app-input password-reg" type="password" placeholder="Password" >
                <input class="app-input password-confirm-reg" type="password" placeholder="Confirm Password" >
                <div class="app-button green register">Submit</div>
            </div>

             <div id="spinner-register" class="app-section" style="display:none;height:120px;">
            </div>
        </div>
    </div>
    <!-- End Register Page ----------------------------------------------------------------------------------------- -->


    <!-- Event Page ----------------------------------------------------------------------------------------- -->
    <div class="app-page" data-page="event">
        <div class="app-topbar red">
            <div class="app-button left" data-back data-autotitle></div>
            <div class="app-title">Events</div>
        </div>
        <div class="app-content">
            <div class="event-image"></div>
            <div class="app-section app-button event-status green"></div>
            <div class="app-section app-button event-signin blue" data-target="login"> Sign in to join this event. </div>


             <div class="app-list small-drop">
                    <li class="event-date">Date:  </li>
                    <li class="event-time">Time: </li>
                    <li class="event-desc">About: </li>
                </div> 
                <div style="margin-top:20px;"></div>

                <div class="app-list small-drop">
                    <li class="event-address"></li>
                </div> 
                <div id="event-map-canvas"></div>

                <div style="margin-top:20px;"></div>


        </div>
    </div>
    <!-- End Event Page ----------------------------------------------------------------------------------------- -->

    <!-- <div class="splash"></div> -->

    <script src="cordova.js"></script>

    <script src="lib/jquery-2.1.1.min.js"></script>
    <script src="lib/pull/jquery.plugin.pullToRefresh.js"></script>
    <script src="lib/jquery.transit.min.js"></script> 
    <!--<script src="lib/zepto.js"></script>-->
    <script src="lib/fastclick.js"></script> 
    <script src="js/adapters/memory-adapter.js"></script>
    <script src="lib/app.min.js"></script>
    <script src="lib/spin.min.js"></script>
    <script src="lib/moment.min.js"></script>
  <!--  <script src="lib/hookjs/mousewheel.js"></script>
    <script src="lib/hookjs/hook.min.js"></script> -->

    <script src="js/app.js"></script>
    <script src="lib/simply.js"></script> 
    <script src="js/controllers/home.js"></script>
    <script src="js/controllers/event.js"></script>
    <script src="js/controllers/login.js"></script>
    <script src="js/controllers/register.js"></script>
    <script src="js/controllers/account.js"></script>
    <script src="js/controllers/edit-account.js"></script>
    <script src="lib/PushNotification.js"></script>
    <script>
    // $('#hook').hook();
    var regId;
    var userId;
    function onNotificationGCM (e) {
        if (e.event == 'registered'){
            if ( e.regid.length > 0 ){
                regId = e.regid;
                console.log("Regid " + e.regid);
                
                if (document.currentUser())userId = document.currentUser()._id;
                else userId = null;
                // alert('registration id = '+e.regid);
                
                $.ajax({
                    type:'POST',
                    url: document.config.host + '/registerDevice',
                    data: {
                        'reg_id':regId,
                        'user_id':userId
                    },
                    success:function(data){
                        console.log(data);
                    },
                    error:function(err){
                        console.log(err);
                    },
                    crossDomain: true,
                    dataType: 'form-data'
                });

            }
        }
        else if (e.event == 'message'){
            
            alert(e.payload.title +': '+e.payload.message);
            var s = new Media('./beep.wav');
            s.play();
        }
    }

    document.addEventListener('deviceready', function(){
        
        var pushNotification = window.plugins.pushNotification;

        pushNotification.register(
            function(result) {
                    // alert('Callback Success! Result = '+result)
            },
            function(error) {
                    // alert(error);
            },
            {
                "senderID":"403989106949",
                "ecb":"onNotificationGCM"
            }
        );
        
    }, true);


    try {
        App.restore();

    } catch (err) {
        App.load('home');
    }
    </script>
</body>

</html>
